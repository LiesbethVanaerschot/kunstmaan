!function(){"use strict";angular.module("masonry",["ng"]).directive("masonry",function(n){return{restrict:"AC",link:function(e,i,t){var r=i[0],o=angular.extend({itemSelector:".item"},angular.fromJson(t.masonry)),a=e.masonry=new Masonry(r,o),s=0;e.update=function(){s&&n.cancel(s),s=n(function(){s=0,a.reloadItems(),a.layout(),i.children(o.itemSelector).css("visibility","visible")},120)},e.removeBrick=function(){n(function(){a.reloadItems(),a.layout()},500)},e.appendBricks=function(n){a.appended(n)},e.$on("masonry.layout",function(){a.layout()}),e.update()}}}).directive("masonryTile",function(){return{restrict:"AC",link:function(n,e){e.css("visibility","visible");var i=e.parent("*[masonry]:first").scope(),t=i.update,r=i.removeBrick,o=i.appendBricks;t&&(imagesLoaded(e.get(0),t),e.ready(t)),o&&imagesLoaded(e.get(0),o(e)),n.$on("$destroy",function(){r&&r()})}}})}();